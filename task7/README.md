Потокобезопасная Map на Go
Описание
Потокобезопасная реализация map с использованием мьютексов для безопасного доступа из нескольких горутин.

Использование
go
// Создание
safeMap := NewSafeMap()

// Добавление данных
safeMap.Set("key", 100)

// Получение данных
value, exists := safeMap.Get("key")

// Увеличение значения
safeMap.Increment("counter")

// Удаление
safeMap.Delete("key")

// Получение всех данных
allData := safeMap.GetAll()

// Очистка
safeMap.Clear()
Запуск с проверкой гонок
bash
# Установи gcc если нужно
sudo apt update && sudo apt install gcc -y

# Запусти с детектором гонок
go run -race main.go
Что проверяет детектор гонок
Программа запускает 10 горутин для записи и 1 для чтения. Детектор проверяет:

Нет ли одновременного доступа к map из разных горутин

Корректность работы мьютексов

Отсутствие гонок данных

Результат
Программа выведет количество записей после каждого чтения и финальные значения всех ключей.

Тестирование
bash
# Запуск тестов с детектором гонок
go test -race ./...